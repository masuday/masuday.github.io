<!DOCTYPE html>
<!--==============================================================================
	           "GitHub HTML5 Pandoc Template" v1.2 — by Tristano Ajmone
	==============================================================================
	(c) Tristano Ajmone, 2017, MIT License (MIT). Project's home repository:

	- https://github.com/tajmone/pandoc-goodies

	This template reuses source code taken from the following projects:

	- GitHub Markdown CSS: © Sindre Sorhus, MIT License (MIT):
	  https://github.com/sindresorhus/github-markdown-css

	- Primer CSS: © 2016 GitHub Inc., MIT License (MIT):
	  http://primercss.io/
	==============================================================================-->
<html>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Yutaka Masuda" />
  <title>File input and output</title>
  <style type="text/css">@font-face{font-family:octicons-link;src:url(data:font/woff;charset=utf-8;base64,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) format('woff')}.markdown-body{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;color:#24292e;font-family:-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";font-size:16px;line-height:1.5;word-wrap:break-word;box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto;padding:45px}.markdown-body .octicon{display:inline-block;fill:currentColor;vertical-align:text-bottom}.markdown-body a{background-color:transparent;-webkit-text-decoration-skip:objects;color:#0366d6;text-decoration:none}.markdown-body a:active,.markdown-body a:hover{outline-width:0}.markdown-body h1{margin:.67em 0}.markdown-body img{border-style:none}.markdown-body svg:not(:root){overflow:hidden}.markdown-body code,.markdown-body kbd,.markdown-body pre{font-family:monospace,monospace}.markdown-body input{font:inherit;margin:0;overflow:visible;font-family:inherit;font-size:inherit;line-height:inherit}.markdown-body [type=checkbox]{box-sizing:border-box;padding:0}.markdown-body *{box-sizing:border-box}.markdown-body a:hover{text-decoration:underline}.markdown-body strong{font-weight:600}.markdown-body hr{box-sizing:content-box;overflow:hidden;background:0 0;border-bottom:1px solid #dfe2e5}.markdown-body hr::before{display:table;content:""}.markdown-body hr::after{display:table;clear:both;content:""}.markdown-body table{border-spacing:0;border-collapse:collapse;display:block;width:100%;overflow:auto}.markdown-body td,.markdown-body th{padding:0}.markdown-body blockquote{margin:0}.markdown-body ol ol,.markdown-body ul ol{list-style-type:lower-roman}.markdown-body ol ol ol,.markdown-body ol ul ol,.markdown-body ul ol ol,.markdown-body ul ul ol{list-style-type:lower-alpha}.markdown-body dd{margin-left:0}.markdown-body code{font-family:SFMono-Regular,Consolas,"Liberation Mono",Menlo,Courier,monospace}.markdown-body pre{font:12px SFMono-Regular,Consolas,"Liberation Mono",Menlo,Courier,monospace;word-wrap:normal}.markdown-body .pl-0{padding-left:0!important}.markdown-body .pl-1{padding-left:4px!important}.markdown-body .pl-2{padding-left:8px!important}.markdown-body .pl-3{padding-left:16px!important}.markdown-body .pl-4{padding-left:24px!important}.markdown-body .pl-5{padding-left:32px!important}.markdown-body .pl-6{padding-left:40px!important}.markdown-body::before{display:table;content:""}.markdown-body::after{display:table;clear:both;content:""}.markdown-body>:first-child{margin-top:0!important}.markdown-body>:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body .anchor{float:left;padding-right:4px;margin-left:-20px;line-height:1}.markdown-body .anchor:focus{outline:0}.markdown-body blockquote,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e1e4e8;border:0}.markdown-body blockquote{padding:0 1em;color:#6a737d;border-left:.25em solid #dfe2e5}.markdown-body blockquote>:first-child{margin-top:0}.markdown-body blockquote>:last-child{margin-bottom:0}.markdown-body kbd{font-size:11px;box-shadow:inset 0 -1px 0 #959da5}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#1b1f23;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1{padding-bottom:.3em;font-size:2em;border-bottom:1px solid #eaecef}.markdown-body h2{padding-bottom:.3em;font-size:1.5em;border-bottom:1px solid #eaecef}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#6a737d}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li>p{margin-top:16px}.markdown-body li+li{margin-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:600}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table th{font-weight:600}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #dfe2e5}.markdown-body table tr{background-color:#fff;border-top:1px solid #c6cbd1}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}.markdown-body img{max-width:100%;box-sizing:content-box;background-color:#fff}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f6f8fa;border-radius:3px}.markdown-body .full-commit .btn-outline:not(:disabled):hover{color:#005cc5;border-color:#005cc5}.markdown-body kbd{display:inline-block;padding:3px 5px;font:11px SFMono-Regular,Consolas,"Liberation Mono",Menlo,Courier,monospace;line-height:10px;color:#444d56;vertical-align:middle;background-color:#fcfcfc;border:1px solid #c6cbd1;border-bottom-color:#959da5;border-radius:3px;box-shadow:inset 0 -1px 0 #959da5}.markdown-body :checked+.radio-label{position:relative;z-index:1;border-color:#0366d6}.markdown-body .task-list-item{list-style-type:none}.markdown-body .task-list-item+.task-list-item{margin-top:3px}.markdown-body .task-list-item input{margin:0 .2em .25em -1.6em;vertical-align:middle}.markdown-body hr{border-bottom-color:#eee}.flash{position:relative;padding:16px;color:#246;background-color:#e2eef9;border:1px solid #bac6d3;border-radius:3px}.flash p:last-child{margin-bottom:0}.flash-messages{margin-bottom:24px}.flash-warn{color:#4c4a42;background-color:#fff9ea;border-color:#dfd8c2}.flash-error{color:#911;background-color:#fcdede;border-color:#d2b2b2}.flash-success{color:#22662c;background-color:#e2f9e5;border-color:#bad3be}.flash-plain{color:#4c4a42;background-color:#f5f5f5;border-color:#c1c1c1}</style>
  <style type="text/css">:not(pre) > code{white-space: pre; background-color: #faf7f5;}</style>
  <style type="text/css">pre[data-language='renumf90']{background-color:#EFEFFE;}</style>
  <style type="text/css">pre[data-language='Fortran']{background-color:#E7FFE7;}</style>
  <style type="text/css">pre[data-language='output']{background-color:#FFFFFF;border:thin solid black;}</style>
  <style type="text/css">pre[data-language='shell']{background-color:#FFFFFF;border:thin dashed;}</style>
  <style type="text/css">pre[data-caption]::before{content:attr(data-caption) "\a\a";font-size:large;font-weight:bold;border-bottom:thin solid black}</style>
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS_CHTML-full" type="text/javascript"></script>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  <link rel="stylesheet" href="prism.css">
  <script type="text/javascript" src="prism.js"></script>
</head>
</head>
<body>
<article class="markdown-body">
<header>
<h1 class="title">File input and output</h1>
<p class="author">Yutaka Masuda</p>
<p class="date">January 2020</p>
</header>
<nav id="TOC">
<ul>
<li><a href="#file-input-and-output">File input and output</a>
<ul>
<li><a href="#file-basics">File basics</a></li>
<li><a href="#practical-text-file-reading-and-writing">Practical text file reading and writing</a></li>
<li><a href="#file-position">File position</a></li>
</ul></li>
</ul>
</nav>
<p>
Back to <a href="./index.html">index.html</a>.
</p>
<h1 id="file-input-and-output">File input and output</h1>
<p>In Fortran, input and output (I/O) from/to a file has the same form as I/O from the keyboard or to the screen (<em>physical devices</em>). The only difference is that, for the file I/O, the source and the destination are a file, not the physical devices. Defining a file as a “device” allows you to read and write the data to and from the “device” using the <code>read</code> and <code>write</code> statements with the same edit descriptors as we have seen before. Before trying the file I/O, I encourage the readers to master the basics of <code>print</code> and <code>read</code> with edit descripter.</p>
<p>In this chapter, we will see how to write and read a file.</p>
<h2 id="file-basics">File basics</h2>
<h3 id="output-to-text-file">Output to text file</h3>
<p>The following is a typical program to save some numbers to a file. This program creates a file <code>output.txt</code> in the current directory.</p>
<pre data-language="Fortran"><code class="language-fortran">program file
   implicit none
   real :: a,b,c

   ! computation
   a = 1
   b = 2
   c = log(a+b)

   ! save the values to a file
   open(10,file=&#39;input.txt&#39;)
   write(10,*) a,b,c
   close(10)
end program file</code></pre>
<p>Contrary to <code>print</code>, we need a couple of steps to save the values to a file.</p>
<ol type="1">
<li>Use the <code>open</code> statement to connect a file name <code>output.txt</code> to an integer number (<em>logical unit number</em>). After this, all the access to the file is performed through this number.</li>
<li>Writes 3 values to ten files using the default format.</li>
<li>After the values are written, disconnect to the file using <code>close</code>.</li>
</ol>
<p>You can check if the new file is created in the current directory where you are working. It is a text file containing human-readable characters, and it contains 3 numbers with the default format as you get by <code>print *,a,b,c,</code> on the screen. To short, the output to a text file is the same as the screen output except for that additional statements, <code>open</code> and <code>close</code>, are needed.</p>
<h3 id="input-from-text-file">Input from text file</h3>
<p>File reading has the same behavior as keyboard input except that the values are from a file. As file writing, you have to call <code>open</code> before reading a file, and <code>close</code> for the termination. Using the file created above, you can read 3 values from the file.</p>
<pre data-language="Fortran"><code class="language-fortran">program file
   implicit none
   real :: a,b,c
   ! read the values from a file
   open(10,file=&#39;output.txt&#39;)
   read(10,*) a,b,c
   close(10)
end program file</code></pre>
<p>The file <code>output.txt</code> should be in the same directory as the program. Otherwise, this program stops on <code>open</code> with an error. The <code>read</code> statement has at least two parameters in <code>()</code> with the same meaning as <code>write</code>. If enough values are not in the file, the <code>read</code> statement generates an error.</p>
<h3 id="unit-number">Unit number</h3>
<p>You can use any unit number (basically, positive integer numbers) if it has not been already used as the unit number. A best practice is to use an integer variable for the unit number. See the following piece of code.</p>
<pre data-language="Fortran"><code class="language-fortran">program file
   ...
   integer :: unit
   ...
   unit = 10
   open(unit,file=&#39;output.txt&#39;)
   write(unit,*) a,b,c
   close(unit)
end program file</code></pre>
<p>In the Modern Fortran standard, the user does not have to choose the unit number anymore. The system can automatically assign an appropriate number through the <code>newunit=</code> option in <code>open</code>. The above example is reduced to the following code.</p>
<pre data-language="Fortran"><code class="language-fortran">program file
   ...
   integer :: unit
   ...
   open(newunit=unit,file=&#39;output.txt&#39;)
   write(unit,*) a,b,c
   close(unit)
end program file</code></pre>
<p>You don’t have to initialize <code>unit</code> because a value is assigned to <code>unit</code> at the <code>open</code> statement.</p>
<h2 id="practical-text-file-reading-and-writing">Practical text file reading and writing</h2>
<h3 id="reading-a-file">Reading a file</h3>
<h4 id="opening-an-exisitng-file">Opening an exisitng file</h4>
<p>If you want to make sure that a file exists when opening the file, you can put an option, <code>status="old"</code> in <code>open</code>.</p>
<pre data-language="Fortran"><code class="language-fortran">   open(newunit=unit,file=&quot;input.txt&quot;,status=&quot;old&quot;)</code></pre>
<p>If there is no file, the program stops with an error. You can get the error status of <code>open</code> using <code>iostat=</code> with an arbitrary integer variable.</p>
<pre data-language="Fortran"><code class="language-fortran">   integer :: info
   ...
   open(newunit=unit,file=&quot;input.txt&quot;,status=&quot;old&quot;,iostat=info)</code></pre>
<p>With the above statement, the program checks if there is <code>input.txt</code> or not. If the file is not there, it returns a negative value to the variable (<code>info</code>). Otherwise, it returns 0 to the variable. So, the following code catches the error.</p>
<pre data-language="Fortran"><code class="language-fortran">   integer :: info
   ...
   open(newunit=unit,file=&quot;input.txt&quot;,status=&quot;old&quot;,iostat=info)
   if(info/=0) stop &quot;No file&quot;</code></pre>
<p>The statement, <code>status="old"</code>, make the file read-only. When you try <code>write</code> to this file, you should get an error.</p>
<h4 id="error-status-while-reading-the-file">Error status while reading the file</h4>
<p>A text file may have multiple lines (rows), and sometimes you do not know how many rows the file has. The <code>read</code> statement can detect an error while reading a text file. The <em>error status</em> is available with the <code>iostat=</code> option with an arbitrary integer variable. Here is a piece of code with an arbitrary variable, <code>info</code>, to catch the error status.</p>
<pre data-language="Fortran"><code class="language-fortran">   integer :: unit,info
   ...
   read(unit,*,iostat=info) a,b,c</code></pre>
<p>In the above code, <code>info</code> has the status of <code>read</code>.</p>
<ul>
<li><code>info</code> is 0 when there is no error.</li>
<li><code>info</code> is negative if there is no more data in the file.</li>
<li><code>info</code> is positive if there are some errors (e.g., the data in the file does not match the variables).</li>
</ul>
<h4 id="repeated-reading-the-data">Repeated reading the data</h4>
<p>There is a typical form to read the data from the file until the end of the file. It looks similar to read the data from the keyboard until you input particular values.</p>
<pre data-language="Fortran"><code class="language-fortran">   do
      read(unit,*,iostat=info) a,b,c
      if(info&lt;0) exit
      ...
   end do</code></pre>
<h4 id="ignored-fields">Ignored fields</h4>
<p>When a line has space-separated, multiple fields, but the variables cannot read all of them, and the <code>read</code> statement ignores the rest of them. For example, you have the following file.</p>
<pre><code>  10  10  15  ABC</code></pre>
<p>The following code reads the first 3 numbers but ignores the characters <code>ABC</code> without any errors.</p>
<pre data-language="Fortran"><code class="language-fortran">   read(unit,*,iostat=info) a,b,c</code></pre>
<p>In this way, while you read some numerical values in the first few fields, you can put characters in the last fields.</p>
<h3 id="writing-a-file">Writing a file</h3>
<h4 id="creating-a-new-file">Creating a new file</h4>
<p>When you open a file that already exists, the <code>write</code> statement will renew it by default. Precisely, it completely removes the existing file, and the new content is placed in the file as the first record. Be aware that there is a risk to lose the file. The following piece of code shows this behavior.</p>
<pre data-language="Fortran"><code class="language-fortran">   open(newunit=unit,file=&quot;data.txt&quot;)

   ! It removes the file, and it updates the file by the value, 100.
   write(unit,*) 100</code></pre>
<h4 id="appending-data-to-an-existing-file">Appending data to an existing file</h4>
<p>IF a file is already there, you can append the data to it without losing the file. You need <code>position="append"</code> in <code>open</code> to do this.</p>
<pre data-language="Fortran"><code class="language-fortran">   open(newunit=unit,file=&quot;data.txt&quot;,position=&quot;append&quot;)</code></pre>
<p>Using this option, the new data is added to the end of file.</p>
<h4 id="error-status-while-reading-the-file-1">Error status while reading the file</h4>
<p>With this option, the new data is added to the end of the file.</p>
<pre data-language="Fortran"><code class="language-fortran">   integer :: unit,info
   ...
   write(unit,*,iostat=info) a,b,c</code></pre>
<p>The status (<code>info</code>) is 0 when there is no error. It is positive if there is an error with <code>write</code> (for example, trying to write a file in a read-only device).</p>
<h4 id="no-new-line">No “new line”</h4>
<p>The <code>write</code> statement puts a “newline” at the end of the data. To suppress the new line, use <code>advance="no"</code>. It is useful in a file and on the screen.</p>
<pre data-language="Fortran"><code class="language-fortran">   write(unit,*,advance=&quot;no&quot;) 10,20
   write(unit,*,advance=&quot;no&quot;) 30,40
   write(unit,*) 50</code></pre>
<pre data-language="output"><code>        10        20        30        40        50</code></pre>
<h2 id="file-position">File position</h2>
<h3 id="moving-a-file-position">Moving a file position</h3>
<p>When open a file, the <em>file position</em> is set to the beginning of the file by default. With <code>position="append"</code> in <code>open</code>, the file position is at the end of the file. Whenever you perform <code>read</code> or <code>write</code>, the file position moves to the top of the next line. There are some statements to change the file position.</p>
<table>
<thead>
<tr class="header">
<th>Statement</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>backspace(unit)</code></td>
<td>Move back to the previous line</td>
<td><code>backspace(10)</code></td>
</tr>
<tr class="even">
<td><code>rewind(unit)</code></td>
<td>Move back to the beginning of the file</td>
<td><code>rewind(10)</code></td>
</tr>
</tbody>
</table>
<h3 id="when-to-lose-the-file">When to lose the file</h3>
<p>There is an essential fact in the file I/O: you can perform both <code>read</code> and <code>write</code> to the same file by default. This fact explains when you lose a file by <code>write</code>. Assume that you move the position to the top of the third line in a text file by performing <code>read</code> twice. The file position is shown as <code>&gt;</code> in the following example file.</p>
<pre><code>   The first line
   The second line
&gt;  The third line
   The fourth line</code></pre>
<p>With this setting, when you perform <code>write</code>, the program removes all the subsequent lines at and after the third line in the file, then it writes a new line to the third line. Here is the resulting content in the file.</p>
<pre><code>   The first line
   The second line
   Added line
&gt;</code></pre>
<p>When opening a file, the file position is at the top of the file; you write the data to the file, and you will lose the existing content in the file. When opening it with <code>position=append</code>, the position moves to the end of the file, and you can write the new line while keeping the entire file. I encourage the reader not to use both <code>read</code> and <code>write</code> in the same file unless you really need to do it.</p>
<p>
Back to <a href="./index.html">index.html</a>.
</p>
</article>
</body>
</html>
