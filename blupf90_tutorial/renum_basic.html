<!DOCTYPE html>
<!--==============================================================================
	           "GitHub HTML5 Pandoc Template" v1.2 — by Tristano Ajmone
	==============================================================================
	(c) Tristano Ajmone, 2017, MIT License (MIT). Project's home repository:

	- https://github.com/tajmone/pandoc-goodies

	This template reuses source code taken from the following projects:

	- GitHub Markdown CSS: © Sindre Sorhus, MIT License (MIT):
	  https://github.com/sindresorhus/github-markdown-css

	- Primer CSS: © 2016 GitHub Inc., MIT License (MIT):
	  http://primercss.io/
	==============================================================================-->
<html>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Yutaka Masuda" />
  <title>Data preparation with RENUMF90</title>
  <style type="text/css">@font-face{font-family:octicons-link;src:url(data:font/woff;charset=utf-8;base64,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) format('woff')}.markdown-body{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;color:#24292e;font-family:-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";font-size:16px;line-height:1.5;word-wrap:break-word;box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto;padding:45px}.markdown-body .octicon{display:inline-block;fill:currentColor;vertical-align:text-bottom}.markdown-body a{background-color:transparent;-webkit-text-decoration-skip:objects;color:#0366d6;text-decoration:none}.markdown-body a:active,.markdown-body a:hover{outline-width:0}.markdown-body h1{margin:.67em 0}.markdown-body img{border-style:none}.markdown-body svg:not(:root){overflow:hidden}.markdown-body code,.markdown-body kbd,.markdown-body pre{font-family:monospace,monospace}.markdown-body input{font:inherit;margin:0;overflow:visible;font-family:inherit;font-size:inherit;line-height:inherit}.markdown-body [type=checkbox]{box-sizing:border-box;padding:0}.markdown-body *{box-sizing:border-box}.markdown-body a:hover{text-decoration:underline}.markdown-body strong{font-weight:600}.markdown-body hr{box-sizing:content-box;overflow:hidden;background:0 0;border-bottom:1px solid #dfe2e5}.markdown-body hr::before{display:table;content:""}.markdown-body hr::after{display:table;clear:both;content:""}.markdown-body table{border-spacing:0;border-collapse:collapse;display:block;width:100%;overflow:auto}.markdown-body td,.markdown-body th{padding:0}.markdown-body blockquote{margin:0}.markdown-body ol ol,.markdown-body ul ol{list-style-type:lower-roman}.markdown-body ol ol ol,.markdown-body ol ul ol,.markdown-body ul ol ol,.markdown-body ul ul ol{list-style-type:lower-alpha}.markdown-body dd{margin-left:0}.markdown-body code{font-family:SFMono-Regular,Consolas,"Liberation Mono",Menlo,Courier,monospace}.markdown-body pre{font:12px SFMono-Regular,Consolas,"Liberation Mono",Menlo,Courier,monospace;word-wrap:normal}.markdown-body .pl-0{padding-left:0!important}.markdown-body .pl-1{padding-left:4px!important}.markdown-body .pl-2{padding-left:8px!important}.markdown-body .pl-3{padding-left:16px!important}.markdown-body .pl-4{padding-left:24px!important}.markdown-body .pl-5{padding-left:32px!important}.markdown-body .pl-6{padding-left:40px!important}.markdown-body::before{display:table;content:""}.markdown-body::after{display:table;clear:both;content:""}.markdown-body>:first-child{margin-top:0!important}.markdown-body>:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body .anchor{float:left;padding-right:4px;margin-left:-20px;line-height:1}.markdown-body .anchor:focus{outline:0}.markdown-body blockquote,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e1e4e8;border:0}.markdown-body blockquote{padding:0 1em;color:#6a737d;border-left:.25em solid #dfe2e5}.markdown-body blockquote>:first-child{margin-top:0}.markdown-body blockquote>:last-child{margin-bottom:0}.markdown-body kbd{font-size:11px;box-shadow:inset 0 -1px 0 #959da5}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#1b1f23;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1{padding-bottom:.3em;font-size:2em;border-bottom:1px solid #eaecef}.markdown-body h2{padding-bottom:.3em;font-size:1.5em;border-bottom:1px solid #eaecef}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#6a737d}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li>p{margin-top:16px}.markdown-body li+li{margin-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:600}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table th{font-weight:600}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #dfe2e5}.markdown-body table tr{background-color:#fff;border-top:1px solid #c6cbd1}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}.markdown-body img{max-width:100%;box-sizing:content-box;background-color:#fff}.markdown-body code{padding:.2em 0;margin:0;font-size:85%;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body code::after,.markdown-body code::before{letter-spacing:-.2em;content:"\00a0"}.markdown-body pre>code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:0 0;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f6f8fa;border-radius:3px}.markdown-body pre code{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}.markdown-body pre code::after,.markdown-body pre code::before{content:normal}.markdown-body .full-commit .btn-outline:not(:disabled):hover{color:#005cc5;border-color:#005cc5}.markdown-body kbd{display:inline-block;padding:3px 5px;font:11px SFMono-Regular,Consolas,"Liberation Mono",Menlo,Courier,monospace;line-height:10px;color:#444d56;vertical-align:middle;background-color:#fcfcfc;border:1px solid #c6cbd1;border-bottom-color:#959da5;border-radius:3px;box-shadow:inset 0 -1px 0 #959da5}.markdown-body :checked+.radio-label{position:relative;z-index:1;border-color:#0366d6}.markdown-body .task-list-item{list-style-type:none}.markdown-body .task-list-item+.task-list-item{margin-top:3px}.markdown-body .task-list-item input{margin:0 .2em .25em -1.6em;vertical-align:middle}.markdown-body hr{border-bottom-color:#eee}.flash{position:relative;padding:16px;color:#246;background-color:#e2eef9;border:1px solid #bac6d3;border-radius:3px}.flash p:last-child{margin-bottom:0}.flash-messages{margin-bottom:24px}.flash-warn{color:#4c4a42;background-color:#fff9ea;border-color:#dfd8c2}.flash-error{color:#911;background-color:#fcdede;border-color:#d2b2b2}.flash-success{color:#22662c;background-color:#e2f9e5;border-color:#bad3be}.flash-plain{color:#4c4a42;background-color:#f5f5f5;border-color:#c1c1c1}</style>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">pre[data-language='renumf90']{background-color:#EFEFFE;}</style>
  <style type="text/css">pre[data-language='blupf90']{background-color:#E7FFE7;}</style>
  <style type="text/css">pre[data-language='output']{background-color:#FFFFFF;border:thin solid black;}</style>
  <style type="text/css">pre[data-language='shell']{background-color:#FFFFFF;border:thin dashed;}</style>
  <style type="text/css">pre[data-caption]::before{content:attr(data-caption) "\a\a";font-size:large;font-weight:bold;border-bottom:thin solid black}</style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS_CHTML-full" type="text/javascript"></script>
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS_CHTML-full" type="text/javascript"></script>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<article class="markdown-body">
<header>
<h1 class="title">Data preparation with RENUMF90</h1>
<p class="author">Yutaka Masuda</p>
<p class="date">September 2019</p>
</header>
<nav id="TOC">
<ul>
<li><a href="#basic-data-preparation">Basic data preparation</a><ul>
<li><a href="#basic-usage-of-renumf90">Basic usage of RENUMF90</a></li>
<li><a href="#optional-features-in-renumf90">Optional features in RENUMF90</a></li>
<li><a href="#what-is-the-best-practice">What is the best practice?</a></li>
<li><a href="#summary">Summary</a></li>
</ul></li>
</ul>
</nav>
<h1 id="basic-data-preparation">Basic data preparation</h1>
<h2 id="basic-usage-of-renumf90">Basic usage of RENUMF90</h2>
<h3 id="why-renumf90">Why RENUMF90?</h3>
<p>BLUPF90 accepts data and pedigree files containing only numerical expressions (integer or real values). A group label should be integer starting from 1. A raw data file usually contains characters (alphabets or symbols) for animals’ ID or group code. The characters should be replaced with numerical values before the analysis with BLUPF90 programs. RENUMF90 performs such a job. We call this process as <em>renumbering</em>.</p>
<h3 id="trivial-instruction-file">Trivial instruction file</h3>
<p>RENUMF90 reads a parameter file, but it is totally different from the one used in BLUPF90. Don’t confuse 2 kinds of parameter files. Here, to avoid the confusion, we will refer to the parameter file used in RENUMF90 as an <em>instruction file</em> in this tutorial. This name is unofficial but easier to differentiate two kinds of parameter files.</p>
<p>To understand the behavior of RENUMF90, let’s try a small example without pedigree. Here we use a raw data file and an instruction file. The raw data is a space-separated text file and contains 5 columns.</p>
<pre data-language="text" data-caption="rawdata1.txt"><code> ID006  A  1  1.0  3.0
 ID009  A  2  1.0  2.0
 ID012  A  1  2.0  4.0
 ID007  B  2  2.0  6.0
 ID010  B  1  1.0  3.0
 ID013  B  2  2.0  6.0
 ID008  C  1  2.0  6.0
 ID011  C  2  1.0  6.0
 ID014  C  1  1.0  8.0
 ID015  C  2  2.0  4.0</code></pre>
<p>We will create a parameter file for the following model. <span class="math display">\[
    y_{ijk} = A_{i} + S_{j} + \beta x_{ijk} + e_{ijk}
\]</span> This model is actually the same as one introduced in the previous chapter as a fixed effect model; The first column is animal ID, the next 2 columns are fixed cross-classified effects, and the third one is a fixed regression. So, this example tries to produce a similar data set used before.</p>
<p>RENUMF90 will read the only necessary columns in the raw data-file, as described in the instruction file. The following instruction file demonstrates the renumbering of column 2 and 3 as fixed cross-classified effects, column 4 as a covariate, and column 5 as a phenotype. In this case, column 1 will not be used.</p>
<pre data-language="renumf90" data-caption="renum1.txt"><code>DATAFILE
rawdata1.txt
TRAITS
5
FIELDS_PASSED TO OUTPUT

WEIGHT(S)

RESIDUAL_VARIANCE
1.0
EFFECT          # 1st effect
2 cross alpha
EFFECT          # 2nd effect
3 cross alpha
EFFECT          # 3rd effect
4 cov</code></pre>
<p>Instruction file can also have comments, which starts with <code>#</code> as seen in the above example.</p>
<p>The instruction file looks like the parameter file for BLUPF90. The file contains several pairs of keyword and value(s). The file contains 6 keywords. <code>EFFECT</code> can be repeated several times. The following keywords are required in the minimal instruction file.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Keyword</th>
<th>possible value</th>
<th style="text-align: left;">description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>DATAFILE</code></td>
<td>characters</td>
<td style="text-align: left;">The name of raw data-file to be processed.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>TRAITS</code></td>
<td>integer</td>
<td style="text-align: left;">A list of the position(s) of observation in the</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td></td>
<td style="text-align: left;">data file.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>FIELDS_PASSED TO OUTPUT</code></td>
<td>integer</td>
<td style="text-align: left;">A list of the position(s) of unchanged</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td></td>
<td style="text-align: left;">columns in the data file. Empty value is</td>
</tr>
<tr class="even">
<td style="text-align: left;">ac</td>
<td>ceptable if not ne</td>
<td style="text-align: left;">eded (just keep the line empty).</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td></td>
<td style="text-align: left;">The columns will be passed through the renumbered file.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>WEIGHT(S)</code></td>
<td>integer</td>
<td style="text-align: left;">The position(s) for weight in the data file.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td></td>
<td style="text-align: left;">Empty value is acceptable if not needed.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>RESIDUAL_VARIANCE</code></td>
<td>real value(s)</td>
<td style="text-align: left;">Residual (co)variances.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>EFFECT</code></td>
<td>(see below)</td>
<td style="text-align: left;">Description of an effect. Repeatable.</td>
</tr>
</tbody>
</table>
<p>The <code>EFFECT</code> keyword can be repeated as many as you need. The above instruction file contains 3 effects. The <code>EFFECT</code> keyword has several values as follows.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Keyword</th>
<th>Position</th>
<th>effect type</th>
<th>data type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>EFFECT</code></td>
<td>integer</td>
<td><code>cross</code></td>
<td><code>alpha</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td></td>
<td></td>
<td><code>numer</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td></td>
<td><code>cov</code></td>
<td>(none)</td>
</tr>
</tbody>
</table>
<p>In the above table, the position means the position(s) of group code (for class effect) or covariate (for regression) in the raw data-file. You can choose one of two effect types (<code>cross</code> for cross-classified or <code>cov</code> for regression). For cross-classified effects, you can also choose the data type: <code>alpha</code> if the column may contain alphabets, or <code>numer</code> if the column surely contains integer values only. Following is an explanation for <code>EFFECT</code> block in the above instruction.</p>
<pre data-language="renumf90"><code>EFFECT
  2 cross alpha       # treat 2nd column as cross - classified effect ; assuming alphabets
EFFECT
  3 cross alpha       # treat 3rd column as cross - classified effect ; assuming alphabets
EFFECT
  4 cov               # treat 4th column as covariate</code></pre>
<p>Note that, in this case, you can technically use <code>numer</code> instead of <code>alpha</code> in the second effect because this column contains integer values only. We, nevertheless, recommend a user to always use <code>alpha</code> because it can accept any types of data including both alphabets and numbers.</p>
<h3 id="resulting-files">Resulting files</h3>
<p>RENUMF90 asks you to type the name of the instruction file. The program reads the original data, and it replaces the group labels with sequential, integer values. Finally, this program generates 3 files, and each file has a fixed name. If you have the existing file with the same name, the file will be replaced with a new one.</p>
<ul>
<li><code>renf90.dat</code>: renumbered data file</li>
<li><code>renf90.par</code>: a suggested parameter file for BLUPF90</li>
<li><code>renf90.tables</code>: a correspondence table between the original code with a new integer value</li>
</ul>
<p>Let’s look into the inside of <code>renf90.dat</code>.</p>
<pre data-language="text"><code> 3.0 1 1 1.0
 2.0 1 2 1.0
 4.0 1 1 2.0
 6.0 2 2 2.0
 3.0 2 1 1.0
 6.0 2 2 2.0
 6.0 3 1 2.0
 6.0 3 2 1.0
 8.0 3 1 1.0
 4.0 3 2 2.0</code></pre>
<p>You can see the difference between the original and renumbered files. The order of lines (rows) are preserved but the order of columns is different. Each column has integer values or real (numerical) values. RENUMF90 change the column order as the following rules.</p>
<ol type="1">
<li>First, observations: RENUMF90 doesn’t change the values.
<ul>
<li>column 1: a single-trait model is assumed and the 1st column is for observations.</li>
</ul></li>
<li>Second, effects: the order is determined with the order of <code>EFFECT</code> statements in the instruction file.
<ul>
<li>column 2 for effect 1 (corresponding to the 2nd column in the original file).</li>
<li>column 3 for effect 2 (3rd column in the original file).</li>
<li>column 4 for effect 3 (4th column in the original file).</li>
</ul></li>
<li>Last, passed columns: RENUMF90 adds the columns specified in <code>FIELDS_PASSED TO OUTPUT</code> keyword in instruction. It doesn’t change the content in anyway so, the passed columns may have alphabets and symbols.
<ul>
<li>no additional columns in this case: we didn’t set any values for this keyword.</li>
</ul></li>
</ol>
<p>Class variables for effect 1 and 2 (column 2 and 3) are successfully replaced with integer values. For effect 1, A is replaced with <code>1</code>, B with <code>2</code> and C with <code>3</code>. For effect 2, 1 is <code>1</code> and 2 is <code>2</code>. The correspondence is saved in <code>renf90.tables</code>.</p>
<pre data-language="text"><code> Effect group 1 of column 1 with 3 levels, effect # 1
 Value    #    consecutive number
A 3 1
B 3 2
C 4 3
 Effect group 2 of column 1 with 2 levels, effect # 2
 Value    #    consecutive number
1 5 1
2 5 2</code></pre>
<p>In this case, each <code>Effect group</code> hash 3 columns: 1st for the original group code, 2nd for the number of times the code occurred in the input, and 3rd for the replaced integer value.</p>
<p>RENUMF90 kindly generates a parameter file for BLUPF90.</p>
<pre data-language="blupf90"><code># BLUPF90 parameter file created by RENF90
DATAFILE
 renf90.dat
NUMBER_OF_TRAITS
           1
NUMBER_OF_EFFECTS
           3
OBSERVATION(S)
    1
WEIGHT(S)

EFFECTS: POSITIONS_IN_DATAFILE NUMBER_OF_LEVELS TYPE_OF_EFFECT[EFFECT NESTED]
  2         3 cross
  3         2 cross
  4 1 cov
RANDOM_RESIDUAL VALUES
   1.0000</code></pre>
<p>This looks like perfect for you to use it in BLUPF90, and the program will run the analysis successfully. In this parameter file, the model description is inherited from the instruction file. For example, the above instruction contains 3 effects so <code>renf90.par</code> also contains 3 effects corresponding to the description in instruction. Note that the <code>EFFECTS:</code> line is followed by extra words (<code>POSITIONS_IN_DATAFILE</code> etc.), but it is no problem for BLUPF90.</p>
<p>Running BLUPF90 with this renf90.par will produce the same solutions as described before. A reader can confirm the fact with these files.</p>
<h2 id="optional-features-in-renumf90">Optional features in RENUMF90</h2>
<p>RENUMF90 specifically accepts some options with an additional line beginning with <code>OPTION</code> at the end of the instruction file. Following options are available.</p>
<ul>
<li><code>OPTION alpha_size</code> <span class="math inline">\(n\)</span>: change the size of character fields (maximum number of letters in a column with alpha specification) to <span class="math inline">\(n\)</span>.</li>
<li><code>OPTION max_string_readline</code> <span class="math inline">\(n\)</span>: change the size of the record length (maximum number of letters in a line) to <span class="math inline">\(n\)</span>.</li>
<li><code>OPTION max_field_readline</code> <span class="math inline">\(n\)</span>: change the maximum number of fields (columns) in a line to <span class="math inline">\(n\)</span>.</li>
</ul>
<p>The <span class="math inline">\(n\)</span> above is replaced with an actual integer value. See the examples.</p>
<pre data-language="renumf90"><code>OPTION max_string_readline 2048</code></pre>
<p>If the option is not usable in RENUMF90, the program simply passes it through <code>renf90.par</code>. So, you can put some <code>OPTION</code> lines, which will be used in BLUPF90, in instruction, and you will obtain a perfect parameter file with desired options for your analysis. See the following example.</p>
<pre data-language="renumf90" data-caption="renum1a.txt"><code>DATAFILE
rawdata1.txt
TRAITS
5
FIELDS_PASSED TO OUTPUT

WEIGHT(S)

RESIDUAL_VARIANCE
1.0
EFFECT
2 cross alpha   # 1st effect
EFFECT
3 cross alpha   # 2nd effect
EFFECT
4 cov           # 3rd effect
OPTION max_string_readline 2048
OPTION alpha_size 40
OPTION solv_method FSPAK</code></pre>
<p>The first 2 options will be taken by RENUMF90, but the last one will be passed through the output file <code>renf90.par</code>.</p>
<h2 id="what-is-the-best-practice">What is the best practice?</h2>
<p>Suppose you have to perform many analyses with the same data but different models. How many times do you run RENUMF90? Basically, there are 2 solutions.</p>
<ol type="1">
<li>In every analysis, rewrite the instruction and run RENUMF90. Then just use the generated <code>renf90.par</code>.</li>
<li>First, prepare the instruction with maximal models and run RENUMF90. Then, every time, copy the generated <code>renf90.par</code> to the new file and modify it to fit a model.</li>
</ol>
<p>The better solution can depend on your situation. If you have a relatively small data set and the analysis will not take a long time, the first approach could be applicable. If your data is large enough and the analysis will take time, the second option is the only efficient way. Also, in some cases, the generated <code>renf90.par</code> is incomplete. The second approach is more general and it is the use case that the development team assumes.</p>
<h2 id="summary">Summary</h2>
<ul>
<li>RENUMF90 reads a parameter file, which is totally different from one for BLUPF90. We call it the instruction file (or, simply instruction) in this chapter.</li>
<li>RENUMF90 replaces alphabets or symbols with integer values which BLUPF90 can use. This process is called <em>renumbering</em>.</li>
<li>RENUMF90 generates a renumbered data file, a table file, and a template parameter file for BLUPF90.</li>
<li>RENUMF90 generates a template parameter file which parameters are inherited from the instruction file.</li>
<li>An instruction file consists of pairs of keyword and values. The file can have the comments with the <code>#</code> syntax.</li>
<li>RENUMF90 passes option lines in instruction to <code>renf90.par</code>.</li>
<li>If you use the same data with different analyses, a possible way is to run RENUMF90 once and modify the generated renf90.par to fit a model you should use.</li>
</ul>
</article>
</body>
</html>
